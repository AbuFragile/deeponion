--- src/or/config.c	2018-01-22 12:27:00.547086220 +0100
+++ src/or/config.c	2018-01-22 12:27:34.731695163 +0100
@@ -884,7 +884,11 @@
   return 0;
 }
 
-extern const char tor_git_revision[]; /* from tor_main.c */
+const char tor_git_revision[] =
+#ifndef _MSC_VER
+#include "micro-revision.i"
+#endif
+  "";
 
 /** The version of this Tor process, as parsed. */
 static char *the_tor_version = NULL;
